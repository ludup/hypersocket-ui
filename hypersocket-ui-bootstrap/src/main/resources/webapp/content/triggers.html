<!-- 
	Replace any Trigger or Triggers with Capitalized name of your resources e.g. Application or Applications
	Replace any trigger or triggers with lower case name of your resources e.g. application or applications
 -->

<div id="contentTriggers">
</div>
<script type="text/javascript">
	$(document).ready(function() {
				$('#contentTriggers').localize();

				$('#contentTriggers').load('content/triggers-modal.html', function() {
						
					$('#contentTriggers').ajaxResourcePage(
							{
								id : "Trigger",
								tableUrl : "triggers/table",
								title: getResource("triggers.label"),
								icon: 'fa-globe',
								resourceUrl : "triggers/trigger",
								fields : [ {
									name : "name"
								}],
								resourceKey : "trigger",
								canCreate: currentMenu.canCreate,
								canUpdate: currentMenu.canUpdate,
								canDelete: currentMenu.canDelete,
								additionalActionsDropdown: true,
								additionalActions: [{
										resourceKey : "chainTrigger",
										iconClass : "fa-chain",
										action : function(resource, callback) {				
											getJSON('triggers/parentEvents/' + resource.actions[0].id, null, function(data) {
												$(document).data('triggerModalCallback').loadParent(resource.actions[0], data.resources);
												$('div[dialog-for="contentTriggers"]').resourceDialog('create');
											});
										},
										enabled : true
								}],
								showCreate: function() {
									$(document).data('triggerModalCallback').loadParent(null, null);
								},
								showUpdate: function() {
									$(document).data('triggerModalCallback').loadParent(null, null);
								},
								validate : function() {
									return $(document).data('triggerModalCallback').validate();
								},
								clearDialog : function(create) {
									$(document).data('triggerModalCallback').clearDialog(create);
								},
								createResource : function() {
									return $(document).data('triggerModalCallback').createResource();
								},
								displayResource : function(resource) {
									$(document).data('triggerModalCallback').loadParent(null, null);
									$(document).data('triggerModalCallback').displayResource(resource);
								},
								complete : function() {
									loadComplete();
								}
							});
				});

			});
</script>